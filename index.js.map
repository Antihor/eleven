{"version":3,"file":"index.js","sources":["../src/js/render.js","../src/js/api.js","../src/main.js"],"sourcesContent":["const loadRef = document.querySelector('.loader');\n\nexport function createGalleryCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n\n    <li class=\"gallery-card\">\n      <a href=${largeImageURL}>\n    <img src=${webformatURL} alt=${tags} /></a>\n    <div class=\"card-legend\">\n    <p>Views: ${views}</p>\n    <p>Likes: ${likes}</p>\n    <p>Comments: ${comments}</p>\n    <p>Downloads: ${downloads}</p>\n    </div>\n      </li>`;\n}\n\nfunction clearGallery() {}\n\nexport function showLoader() {\n  loadRef.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loadRef.classList.add('hidden');\n}\n","import axios from 'axios';\n\nexport function getImagesByQuery(query, currentPage) {\n  const url = 'https://pixabay.com/api/';\n  const API_KEY = '42059071-0978dc0d7158b742eee7c30f5';\n  const params = new URLSearchParams({\n    page: currentPage,\n    per_page: 15,\n    url: 'url',\n    key: API_KEY,\n    q: encodeURIComponent(query),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return axios.get(`${url}?${params}`);\n  // .then(resp => {\n  //   if (!resp.ok) {\n  //     throw new Error(resp.status);\n  //   }\n  //   return resp.json();\n  // })\n  // .catch(err => console.log(err));\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createGalleryCard } from './js/render';\nimport { getImagesByQuery } from './js/api';\nimport { showLoader } from './js/render';\nimport { hideLoader } from './js/render';\n\nconst formRef = document.querySelector('.form');\nconst galRef = document.querySelector('.js-gallery');\nconst LMRef = document.querySelector('.js-load-more');\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet query = '';\n\nformRef.addEventListener('submit', onSubmit);\n\nasync function onSubmit(ev) {\n  try {\n    ev.preventDefault();\n    showLoader();\n    query = ev.currentTarget.elements.query.value.trim();\n\n    page = 1;\n    LMRef.classList.add('hidden');\n\n    const { data } = await getImagesByQuery(query, page);\n\n    if (data.hits.length === 0 || query === '') {\n      iziToast.error({\n        title: 'Sorry!',\n        message:\n          'There are no images matching your search query. Please try again!',\n        position: 'topLeft',\n      });\n      galRef.innerHTML = '';\n      LMRef.classList.add('hidden');\n      formRef.reset();\n    }\n\n    const gallery = data.hits.map(img => createGalleryCard(img)).join('');\n\n    galRef.innerHTML = gallery;\n\n    lightbox.refresh();\n\n    hideLoader();\n\n    formRef.reset();\n\n    LMRef.classList.remove('hidden');\n\n    LMRef.addEventListener('click', onLoadMore);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onLoadMore() {\n  try {\n    showLoader();\n\n    page += 1;\n\n    const { data } = await getImagesByQuery(query, page);\n\n    if (galRef.children.length >= data.totalHits) {\n      iziToast.error({\n        title: 'Sorry!',\n        message: 'You have reached the end of search results!',\n        position: 'topLeft',\n      });\n      LMRef.classList.add('hidden');\n      LMRef.removeEventListener('click', onLoadMore);\n    }\n\n    const gallery = data.hits.map(img => createGalleryCard(img)).join('');\n\n    galRef.insertAdjacentHTML('beforeend', gallery);\n\n    hideLoader();\n    lightbox.refresh();\n    const height = galRef.firstElementChild.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["loadRef","createGalleryCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","hideLoader","getImagesByQuery","query","currentPage","url","API_KEY","params","axios","formRef","galRef","LMRef","lightbox","SimpleLightbox","page","onSubmit","ev","data","iziToast","gallery","img","onLoadMore","err","height","error"],"mappings":"+vBAAA,MAAMA,EAAU,SAAS,cAAc,SAAS,EAEzC,SAASC,EAAkB,CAChC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA;AAAA,gBAGOL,CAAa;AAAA,eACdD,CAAY,QAAQE,CAAI;AAAA;AAAA,gBAEvBE,CAAK;AAAA,gBACLD,CAAK;AAAA,mBACFE,CAAQ;AAAA,oBACPC,CAAS;AAAA;AAAA,YAG7B,CAIO,SAASC,GAAa,CAC3BT,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEO,SAASU,GAAa,CAC3BV,EAAQ,UAAU,IAAI,QAAQ,CAChC,CC/BO,SAASW,EAAiBC,EAAOC,EAAa,CACnD,MAAMC,EAAM,2BACNC,EAAU,qCACVC,EAAS,IAAI,gBAAgB,CACjC,KAAMH,EACN,SAAU,GACV,IAAK,MACL,IAAKE,EACL,EAAG,mBAAmBH,CAAK,EAC3B,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAOK,EAAM,IAAI,GAAGH,CAAG,IAAIE,CAAM,EAAE,CAQrC,CCfA,MAAME,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAQ,SAAS,cAAc,eAAe,EAE9CC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAO,EACPX,EAAQ,GAEZM,EAAQ,iBAAiB,SAAUM,CAAQ,EAE3C,eAAeA,EAASC,EAAI,CAC1B,GAAI,CACFA,EAAG,eAAc,EACjBhB,IACAG,EAAQa,EAAG,cAAc,SAAS,MAAM,MAAM,OAE9CF,EAAO,EACPH,EAAM,UAAU,IAAI,QAAQ,EAE5B,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMf,EAAiBC,EAAOW,CAAI,GAE/CG,EAAK,KAAK,SAAW,GAAKd,IAAU,MACtCe,EAAS,MAAM,CACb,MAAO,SACP,QACE,oEACF,SAAU,SAClB,CAAO,EACDR,EAAO,UAAY,GACnBC,EAAM,UAAU,IAAI,QAAQ,EAC5BF,EAAQ,MAAK,GAGf,MAAMU,EAAUF,EAAK,KAAK,IAAIG,GAAO5B,EAAkB4B,CAAG,CAAC,EAAE,KAAK,EAAE,EAEpEV,EAAO,UAAYS,EAEnBP,EAAS,QAAO,EAEhBX,IAEAQ,EAAQ,MAAK,EAEbE,EAAM,UAAU,OAAO,QAAQ,EAE/BA,EAAM,iBAAiB,QAASU,CAAU,CAC3C,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CAEA,eAAeD,GAAa,CAC1B,GAAI,CACFrB,IAEAc,GAAQ,EAER,KAAM,CAAE,KAAAG,CAAI,EAAK,MAAMf,EAAiBC,EAAOW,CAAI,EAE/CJ,EAAO,SAAS,QAAUO,EAAK,YACjCC,EAAS,MAAM,CACb,MAAO,SACP,QAAS,8CACT,SAAU,SAClB,CAAO,EACDP,EAAM,UAAU,IAAI,QAAQ,EAC5BA,EAAM,oBAAoB,QAASU,CAAU,GAG/C,MAAMF,EAAUF,EAAK,KAAK,IAAIG,GAAO5B,EAAkB4B,CAAG,CAAC,EAAE,KAAK,EAAE,EAEpEV,EAAO,mBAAmB,YAAaS,CAAO,EAE9ClB,IACAW,EAAS,QAAO,EAChB,MAAMW,EAASb,EAAO,kBAAkB,sBAAqB,EAAG,OAEhE,OAAO,SAAS,CACd,IAAKa,EAAS,EACd,SAAU,QAChB,CAAK,CACF,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH"}